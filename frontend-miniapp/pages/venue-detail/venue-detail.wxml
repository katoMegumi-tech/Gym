<view class="container">
  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <block wx:elif="{{venue}}">
    <!-- è½®æ’­å›¾ -->
    <view class="banner-section">
      <swiper class="banner" indicator-dots="{{venue.imageList.length > 1}}" autoplay circular
              bindchange="onSwiperChange">
        <swiper-item wx:for="{{venue.imageList}}" wx:key="index">
          <image src="{{item}}" mode="aspectFill" bindtap="previewImage" data-url="{{item}}"/>
        </swiper-item>
        <swiper-item wx:if="{{!venue.imageList || venue.imageList.length === 0}}">
          <view class="banner-placeholder">
            <text class="placeholder-icon">ğŸŸï¸</text>
            <text class="placeholder-text">{{venue.name}}</text>
          </view>
        </swiper-item>
      </swiper>
      <view class="banner-indicator" wx:if="{{venue.imageList.length > 1}}">
        {{currentImageIndex + 1}}/{{venue.imageList.length}}
      </view>
      <view class="favorite-btn {{isFavorite ? 'active' : ''}}" bindtap="toggleFavorite">
        <text>{{isFavorite ? 'â™¥' : 'â™¡'}}</text>
      </view>
    </view>

    <!-- åŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->
    <view class="info-card main-card">
      <view class="venue-header">
        <view class="venue-title">{{venue.name}}</view>
        <view class="venue-badge {{venue.status === 'OPEN' ? 'open' : 'closed'}}">
          {{venue.status === 'OPEN' ? 'è¥ä¸šä¸­' : 'ä¼‘æ¯ä¸­'}}
        </view>
      </view>
      
      <view wx:if="{{venue.description}}" class="venue-desc">
        {{venue.description}}
      </view>

      <view class="info-list">
        <view class="info-item" bindtap="openLocation">
          <view class="info-icon">ğŸ“</view>
          <view class="info-content">
            <view class="info-label">åœ°å€</view>
            <view class="info-value">{{venue.address}}</view>
          </view>
          <view class="info-arrow">â€º</view>
        </view>
        
        <view class="info-item">
          <view class="info-icon">ğŸ•</view>
          <view class="info-content">
            <view class="info-label">è¥ä¸šæ—¶é—´</view>
            <view class="info-value">{{venue.openTime}} - {{venue.closeTime}}</view>
          </view>
        </view>
        
        <view class="info-item" wx:if="{{venue.contactPhone}}" bindtap="makePhoneCall">
          <view class="info-icon">ğŸ“</view>
          <view class="info-content">
            <view class="info-label">è”ç³»ç”µè¯</view>
            <view class="info-value link">{{venue.contactPhone}}</view>
          </view>
          <view class="info-arrow">â€º</view>
        </view>
      </view>
    </view>

    <!-- åœºåœ°ç»Ÿè®¡ -->
    <view class="stats-card" wx:if="{{courts.length > 0}}">
      <view class="stats-title">åœºåœ°æ¦‚å†µ</view>
      <view class="stats-grid">
        <view class="stats-item" wx:for="{{courtStats}}" wx:key="index" wx:for-item="stat" wx:for-index="type">
          <view class="stats-icon">{{getSportTypeIcon(type)}}</view>
          <view class="stats-name">{{getSportTypeName(type)}}</view>
          <view class="stats-count">
            <text class="available">{{stat.available}}</text>
            <text class="total">/{{stat.count}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åœºåœ°åˆ—è¡¨ -->
    <view class="section">
      <view class="section-header">
        <text class="section-title">å¯é¢„çº¦åœºåœ°</text>
        <text class="section-count">å…±{{courts.length}}ä¸ª</text>
      </view>
      
      <view wx:if="{{courts.length === 0}}" class="empty-courts">
        <text>æš‚æ— å¯ç”¨åœºåœ°</text>
      </view>

      <view wx:else class="court-list">
        <view class="court-card {{item.status !== 'AVAILABLE' ? 'disabled' : ''}}" 
              wx:for="{{courts}}" 
              wx:key="id" 
              bindtap="{{item.status === 'AVAILABLE' ? 'goToBooking' : ''}}" 
              data-id="{{item.id}}">
          <view class="court-icon">{{getSportTypeIcon(item.sportType)}}</view>
          <view class="court-info">
            <view class="court-name">{{item.name}}</view>
            <view class="court-meta">
              <text class="court-type">{{getSportTypeName(item.sportType)}}</text>
              <text class="court-capacity">å®¹çº³{{item.capacity}}äºº</text>
            </view>
          </view>
          <view class="court-action">
            <view class="court-status {{item.status === 'AVAILABLE' ? 'available' : ''}}">
              {{item.status === 'AVAILABLE' ? 'å¯é¢„çº¦' : 'ç»´æŠ¤ä¸­'}}
            </view>
            <view class="court-arrow" wx:if="{{item.status === 'AVAILABLE'}}">â€º</view>
          </view>
        </view>
      </view>
    </view>
  </block>

  <view wx:else class="empty">
    <text>åœºé¦†ä¿¡æ¯ä¸å­˜åœ¨</text>
  </view>
</view>
