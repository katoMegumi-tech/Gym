体育馆场地预约系统业务场景分析

3.1 业务场景分析

3.1.1 用户预约场地业务场景分析

①用户预约场地：用户登录系统后，浏览场馆和场地信息，选择合适的时间段进行预约，填写预约信息并提交，系统生成预约订单，用户完成支付后预约成功。

图3.1 用户预约场地业务流程图

②业务用例描述

1）场地浏览用例描述

表3.1 场地浏览用例描述
用例名称        场地浏览
用例描述        本用例用于用户浏览场馆和场地信息
执行者          普通用户
前置条件        用户已经登录本系统
后置条件        用户成功查看场地详细信息
主过程描述      1. 用户登录系统，进入场馆列表页面
                2. 系统展示所有可用场馆信息，包括场馆名称、地址、开放时间、图片等
                3. 用户选择感兴趣的场馆，点击查看详情
                4. 系统展示该场馆下的所有场地信息，包括场地名称、运动类型、容量、状态等
                5. 用户可以按运动类型筛选场地
                6. 用户选择具体场地查看详细信息和可预约时间段
扩展事件流      A-5a 用户可以收藏喜欢的场馆或场地
                A-6a 系统显示场地的实时预约状态
数据需求        D-2 系统展示场馆信息（名称、地址、联系电话、开放时间、图片）、场地信息（名称、运动类型、容量、状态）
结论            当用户查看到场地详细信息时，用例结束

2）场地预约用例描述

表3.2 场地预约用例描述
用例名称        场地预约
用例描述        本用例用于用户预约场地
执行者          普通用户
前置条件        用户已经登录本系统并选择了场地
后置条件        用户成功创建预约订单
主过程描述      1. 用户在场地详情页面选择预约日期
                2. 系统展示该日期下所有可用时间段及价格
                3. 用户选择合适的时间段，点击预约
                4. 系统展示预约确认页面，包括场地信息、时间、价格等
                5. 用户填写联系人信息和参与人数
                6. 用户选择是否使用优惠券
                7. 用户确认预约信息并提交
                8. 系统生成预约订单，跳转到支付页面
扩展事件流      A-2a 如果选择日期无可用时间段，提示用户选择其他日期
                A-6a 系统自动计算优惠后的实际支付金额
                A-8a 用户可以选择不同的支付方式（微信、支付宝等）
数据需求        D-2 系统展示时间段信息（日期、开始时间、结束时间、价格、状态）、用户填写预约信息（联系人、联系电话、参与人数）
结论            当系统生成预约订单并跳转到支付页面时，用例结束

3）预约支付用例描述

表3.3 预约支付用例描述
用例名称        预约支付
用例描述        本用例用于用户完成预约订单支付
执行者          普通用户
前置条件        用户已经创建预约订单
后置条件        用户成功完成支付，预约生效
主过程描述      1. 系统展示支付页面，显示订单详情和应付金额
                2. 用户选择支付方式（微信支付、支付宝等）
                3. 用户确认支付
                4. 系统调用第三方支付接口
                5. 用户在第三方支付页面完成支付
                6. 系统接收支付结果通知
                7. 系统更新订单状态为已支付
                8. 系统发送预约成功通知给用户
扩展事件流      A-5a 如果支付失败，提示用户重新支付
                A-6a 如果支付超时，订单自动取消
                A-7a 系统记录支付流水信息
数据需求        D-2 系统展示订单信息（预约编号、场地名称、时间、金额）、记录支付信息（支付单号、支付方式、支付状态、交易号）
结论            当系统发送预约成功通知后，用例结束


3.1.2 场馆管理业务场景分析

①场馆管理：管理员登录系统后，可以对场馆信息进行新增、编辑、删除等操作，管理场馆的基本信息、开放时间、状态等，并可以为场馆管理员分配管理权限。

图3.2 场馆管理业务流程图

②业务用例描述

1）场馆新增用例描述

表3.4 场馆新增用例描述
用例名称        场馆新增
用例描述        本用例用于管理员新增场馆信息
执行者          系统管理员、超级管理员
前置条件        管理员已经登录本系统且具有场馆管理权限
后置条件        系统成功创建新场馆
主过程描述      1. 管理员登录系统，导航至场馆管理页面
                2. 管理员点击"新增场馆"按钮
                3. 系统展示场馆信息录入表单，包括场馆名称、地址、联系电话、描述、开放时间、关闭时间等字段
                4. 管理员填写场馆基本信息
                5. 管理员上传场馆图片
                6. 管理员设置场馆状态（开放、关闭、维护中）
                7. 管理员确认信息无误后提交
                8. 系统验证信息完整性和合法性
                9. 系统保存场馆信息并返回成功提示
扩展事件流      A-8a 如果必填信息未填写，系统提示错误并要求补充
                A-8b 如果场馆名称重复，系统提示并要求修改
                A-9a 系统自动记录操作日志
数据需求        D-2 管理员填写场馆信息（名称、地址、联系电话、描述、开放时间、关闭时间、图片、状态）
结论            当页面提示新增成功时，用例结束

2）场馆编辑用例描述

表3.5 场馆编辑用例描述
用例名称        场馆编辑
用例描述        本用例用于管理员编辑场馆信息
执行者          系统管理员、超级管理员、场馆管理员
前置条件        管理员已经登录本系统且具有场馆管理权限
后置条件        系统成功更新场馆信息
主过程描述      1. 管理员在场馆管理页面查看场馆列表
                2. 管理员选择需要编辑的场馆，点击"编辑"按钮
                3. 系统展示场馆信息编辑表单，并填充当前场馆信息
                4. 管理员修改需要更新的信息
                5. 管理员可以更新场馆图片
                6. 管理员可以修改场馆状态
                7. 管理员确认修改后提交
                8. 系统验证信息完整性和合法性
                9. 系统更新场馆信息并返回成功提示
扩展事件流      A-8a 如果必填信息被清空，系统提示错误
                A-9a 如果场馆下有进行中的预约，修改开放时间需要二次确认
                A-9b 系统自动记录操作日志
数据需求        D-2 系统展示当前场馆信息、管理员修改场馆信息（名称、地址、联系电话、描述、开放时间、关闭时间、图片、状态）
结论            当页面提示更新成功时，用例结束

3）场馆删除用例描述

表3.6 场馆删除用例描述
用例名称        场馆删除
用例描述        本用例用于管理员删除场馆信息
执行者          系统管理员、超级管理员
前置条件        管理员已经登录本系统且具有场馆删除权限
后置条件        系统成功删除场馆信息
主过程描述      1. 管理员在场馆管理页面查看场馆列表
                2. 管理员选择需要删除的场馆，点击"删除"按钮
                3. 系统检查该场馆是否有关联的场地和预约
                4. 系统弹出确认对话框，提示删除操作不可恢复
                5. 管理员确认删除操作
                6. 系统删除场馆信息
                7. 系统返回删除成功提示
扩展事件流      A-3a 如果场馆下有场地，系统提示需要先删除所有场地
                A-3b 如果场馆有未完成的预约，系统禁止删除并提示
                A-6a 系统同时删除场馆相关的图片文件
                A-7a 系统自动记录操作日志
数据需求        D-2 系统检查场馆关联数据（场地数量、预约数量）
结论            当页面提示删除成功时，用例结束


3.1.3 预约管理业务场景分析

①预约管理：管理员可以查看所有预约记录，包括预约状态、用户信息、场地信息等，可以对预约进行确认、取消等操作，处理用户的退款申请，并可以查看预约统计数据。

图3.3 预约管理业务流程图

②业务用例描述

1）预约查询用例描述

表3.7 预约查询用例描述
用例名称        预约查询
用例描述        本用例用于管理员查询预约记录
执行者          系统管理员、超级管理员、场馆管理员
前置条件        管理员已经登录本系统且具有预约管理权限
后置条件        系统成功展示预约记录列表
主过程描述      1. 管理员登录系统，导航至预约管理页面
                2. 系统展示预约记录列表，包括预约编号、用户信息、场地信息、预约时间、金额、状态等
                3. 管理员可以按日期范围筛选预约记录
                4. 管理员可以按预约状态筛选（待支付、已支付、已确认、进行中、已完成、已取消）
                5. 管理员可以按场馆或场地筛选
                6. 管理员可以搜索特定用户的预约记录
                7. 管理员点击预约记录查看详细信息
扩展事件流      A-2a 场馆管理员只能查看自己管理场馆的预约记录
                A-7a 系统展示预约详情，包括支付信息、优惠券使用情况等
数据需求        D-2 系统展示预约信息（预约编号、用户姓名、场地名称、预约日期、时间段、金额、状态、创建时间）
结论            当管理员查看到预约详细信息时，用例结束

2）预约取消用例描述

表3.8 预约取消用例描述
用例名称        预约取消
用例描述        本用例用于管理员取消预约订单
执行者          系统管理员、超级管理员、场馆管理员
前置条件        管理员已经登录本系统且具有预约管理权限
后置条件        系统成功取消预约并处理退款
主过程描述      1. 管理员在预约管理页面查看预约列表
                2. 管理员选择需要取消的预约，点击"取消预约"按钮
                3. 系统检查预约状态是否允许取消
                4. 系统弹出取消原因填写对话框
                5. 管理员填写取消原因
                6. 管理员确认取消操作
                7. 系统更新预约状态为已取消
                8. 系统检查是否需要退款
                9. 如需退款，系统自动发起退款流程
                10. 系统发送取消通知给用户
扩展事件流      A-3a 如果预约已完成或已取消，系统提示无法取消
                A-8a 如果预约未支付，直接取消无需退款
                A-9a 系统记录退款信息和退款状态
                A-10a 系统释放被占用的时间段
数据需求        D-2 管理员填写取消原因、系统记录取消信息（取消原因、取消时间、退款金额、退款状态）
结论            当系统发送取消通知后，用例结束

3）退款处理用例描述

表3.9 退款处理用例描述
用例名称        退款处理
用例描述        本用例用于管理员处理预约退款
执行者          系统管理员、超级管理员
前置条件        管理员已经登录本系统且具有支付管理权限
后置条件        系统成功完成退款操作
主过程描述      1. 管理员在支付管理页面查看退款申请列表
                2. 管理员选择需要处理的退款申请
                3. 系统展示退款详情，包括原订单信息、支付信息、退款金额等
                4. 管理员审核退款申请
                5. 管理员确认退款金额
                6. 管理员点击"确认退款"按钮
                7. 系统调用第三方支付接口发起退款
                8. 系统接收退款结果通知
                9. 系统更新支付状态为已退款
                10. 系统发送退款成功通知给用户
扩展事件流      A-7a 如果退款接口调用失败，系统提示错误并允许重试
                A-8a 如果退款处理中，系统显示处理中状态
                A-9a 系统记录退款流水信息
                A-10a 系统自动记录操作日志
数据需求        D-2 系统展示退款信息（原订单号、支付单号、退款金额、退款原因）、记录退款结果（退款状态、退款时间、第三方退款单号）
结论            当系统发送退款成功通知后，用例结束