<view class="container">
  <view class="court-info" wx:if="{{courtInfo}}">
    <text class="court-name">{{courtInfo.name}}</text>
    <text class="court-desc">{{courtInfo.description}}</text>
  </view>

  <view class="date-picker">
    <text class="label">选择日期</text>
    <picker mode="date" value="{{selectedDate}}" bindchange="onDateChange">
      <view class="picker-value">{{selectedDate}}</view>
    </picker>
  </view>

  <view class="timeslots">
    <text class="section-title">选择时间段</text>
    <view class="loading" wx:if="{{loading}}">加载中...</view>
    <view class="slot-list" wx:else>
      <view 
        class="slot-item {{selectedSlot && selectedSlot.id === item.id ? 'selected' : ''}} {{item.status !== 'AVAILABLE' ? 'disabled' : ''}}"
        wx:for="{{timeslots}}" 
        wx:key="id"
        bindtap="selectSlot"
        data-index="{{index}}">
        <text class="slot-time">{{item.startTime}} - {{item.endTime}}</text>
        <text class="slot-price">¥{{item.price}}</text>
        <text class="slot-status">{{item.status === 'AVAILABLE' ? '可预约' : '已满'}}</text>
      </view>
    </view>
    <view class="empty" wx:if="{{!loading && timeslots.length === 0}}">
      <text>暂无可用时间段</text>
    </view>
  </view>

  <view class="footer">
    <view class="price-info" wx:if="{{selectedSlot}}">
      <text class="label">金额：</text>
      <text class="price">¥{{selectedSlot.price}}</text>
    </view>
    <button class="book-btn" bindtap="handleBooking">确认预约</button>
  </view>
</view>
